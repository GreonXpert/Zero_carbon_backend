<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Complete Ticketing System API Test Cases</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 32px;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 16px;
            opacity: 0.9;
        }

        .badge {
            display: inline-block;
            padding: 4px 12px;
            background: rgba(255,255,255,0.2);
            border-radius: 12px;
            font-size: 12px;
            margin-top: 10px;
            font-weight: 600;
        }

        .nav {
            background: #f8f9fa;
            padding: 15px 30px;
            border-bottom: 2px solid #e9ecef;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .nav-button {
            padding: 8px 16px;
            background: white;
            border: 2px solid #667eea;
            color: #667eea;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s;
        }

        .nav-button:hover, .nav-button.active {
            background: #667eea;
            color: white;
            transform: translateY(-2px);
        }

        .nav-button.new {
            background: #ffc107;
            border-color: #ffc107;
            color: #000;
        }

        .nav-button.new:hover {
            background: #ffb300;
            border-color: #ffb300;
        }

        .content {
            padding: 30px;
        }

        .section {
            display: none;
            animation: fadeIn 0.3s;
        }

        .section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .test-case {
            background: #f8f9fa;
            border-left: 4px solid #667eea;
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 6px;
            position: relative;
        }

        .test-case.new-feature {
            border-left-color: #ffc107;
            background: #fff9e6;
        }

        .test-case.new-feature::before {
            content: "NEW";
            position: absolute;
            top: 10px;
            right: 10px;
            background: #ffc107;
            color: #000;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: bold;
        }

        .test-case h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .test-number {
            background: #667eea;
            color: white;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            font-weight: bold;
        }

        .test-case-description {
            color: #6c757d;
            margin-bottom: 15px;
            font-style: italic;
            padding: 10px;
            background: white;
            border-radius: 4px;
            border-left: 3px solid #667eea;
        }

        .method-url {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            align-items: center;
            flex-wrap: wrap;
        }

        .method {
            padding: 6px 12px;
            border-radius: 4px;
            font-weight: bold;
            font-size: 12px;
            letter-spacing: 0.5px;
            min-width: 60px;
            text-align: center;
        }

        .method.GET { background: #28a745; color: white; }
        .method.POST { background: #007bff; color: white; }
        .method.PATCH { background: #ffc107; color: #000; }
        .method.PUT { background: #17a2b8; color: white; }
        .method.DELETE { background: #dc3545; color: white; }

        .url-box {
            flex: 1;
            background: white;
            padding: 10px 15px;
            border: 2px solid #dee2e6;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.2s;
            min-width: 300px;
            word-break: break-all;
        }

        .url-box:hover {
            border-color: #667eea;
            background: #f0f4ff;
        }

        .copy-button {
            padding: 8px 16px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            font-weight: 600;
            transition: all 0.2s;
            white-space: nowrap;
        }

        .copy-button:hover {
            background: #5568d3;
            transform: translateY(-1px);
            box-shadow: 0 4px 8px rgba(102,126,234,0.3);
        }

        .copy-button:active {
            transform: translateY(0);
        }

        .code-block {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 15px;
            border-radius: 6px;
            margin: 10px 0;
            position: relative;
            overflow-x: auto;
        }

        .code-block pre {
            margin: 0;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            line-height: 1.5;
            white-space: pre-wrap;
        }

        .code-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .code-title {
            color: #6c757d;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .code-icon {
            width: 20px;
            height: 20px;
        }

        .headers-section {
            background: #fff3cd;
            padding: 15px;
            border-radius: 6px;
            margin: 10px 0;
            border: 1px solid #ffeaa7;
        }

        .headers-section h4 {
            color: #856404;
            font-size: 14px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .header-item {
            background: white;
            padding: 8px 12px;
            margin: 5px 0;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            border: 1px solid #ffeaa7;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .expected-response {
            background: #d4edda;
            padding: 15px;
            border-radius: 6px;
            margin: 10px 0;
            border: 1px solid #c3e6cb;
        }

        .expected-response h4 {
            color: #155724;
            font-size: 14px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .error-response {
            background: #f8d7da;
            padding: 15px;
            border-radius: 6px;
            margin: 10px 0;
            border: 1px solid #f5c6cb;
        }

        .error-response h4 {
            color: #721c24;
            font-size: 14px;
            margin-bottom: 10px;
        }

        .note {
            background: #e7f3ff;
            border-left: 4px solid #007bff;
            padding: 12px;
            margin: 10px 0;
            border-radius: 4px;
        }

        .note strong {
            color: #004085;
        }

        .warning {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 12px;
            margin: 10px 0;
            border-radius: 4px;
        }

        .warning strong {
            color: #856404;
        }

        .success {
            background: #d4edda;
            border-left: 4px solid #28a745;
            padding: 12px;
            margin: 10px 0;
            border-radius: 4px;
        }

        .success strong {
            color: #155724;
        }

        .variable {
            background: #ffe5e5;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            color: #d63031;
            font-weight: bold;
        }

        .toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #28a745;
            color: white;
            padding: 15px 25px;
            border-radius: 6px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            display: none;
            animation: slideIn 0.3s;
            z-index: 1000;
        }

        .toast.show {
            display: block;
        }

        @keyframes slideIn {
            from {
                transform: translateX(400px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        .setup-section {
            background: linear-gradient(135deg, #fff3cd 0%, #ffe8a1 100%);
            padding: 20px;
            border-radius: 6px;
            margin-bottom: 20px;
            border: 2px solid #ffc107;
        }

        .setup-section h3 {
            color: #856404;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section-title {
            color: #2c3e50;
            font-size: 28px;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #667eea;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .key-check {
            background: #d1ecf1;
            border-left: 4px solid #17a2b8;
            padding: 12px;
            margin: 10px 0;
            border-radius: 4px;
        }

        .key-check strong {
            color: #0c5460;
        }

        .key-check ul {
            margin: 8px 0 0 20px;
        }

        .key-check li {
            margin: 4px 0;
            color: #0c5460;
        }

        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            background: white;
            border-radius: 6px;
            overflow: hidden;
        }

        .comparison-table th,
        .comparison-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #dee2e6;
        }

        .comparison-table th {
            background: #667eea;
            color: white;
            font-weight: 600;
        }

        .comparison-table tr:hover {
            background: #f8f9fa;
        }

        .scenario-card {
            background: white;
            border: 2px solid #667eea;
            border-radius: 6px;
            padding: 15px;
            margin: 15px 0;
        }

        .scenario-card h4 {
            color: #667eea;
            margin-bottom: 10px;
            font-size: 16px;
        }

        .highlight {
            background: #fff176;
            padding: 2px 4px;
            border-radius: 2px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üé´ Complete Ticketing System API Test Cases</h1>
            <p>Including NEW Consultant Internal Issues Support</p>
            <span class="badge">‚ú® Updated with INTERNAL-SUPPORT ClientId</span>
        </div>

        <div class="nav">
            <button class="nav-button active" onclick="showSection('setup')">‚öôÔ∏è Setup & Auth</button>
            <button class="nav-button new" onclick="showSection('consultant-internal')">üÜï Consultant Internal Issues</button>
            <button class="nav-button" onclick="showSection('consultant-admin')">üëî Consultant Admin</button>
            <button class="nav-button" onclick="showSection('consultant')">üíº Consultant</button>
            <button class="nav-button" onclick="showSection('client')">üè¢ Client Users</button>
            <button class="nav-button" onclick="showSection('support-manager')">üõ†Ô∏è Support Manager</button>
            <button class="nav-button" onclick="showSection('support-user')">üéß Support User</button>
            <button class="nav-button" onclick="showSection('common')">‚öôÔ∏è Common Ops</button>
        </div>

        <div class="content">
            <!-- Setup Section -->
            <div id="setup" class="section active">
                <h2 class="section-title">‚öôÔ∏è Setup & Authentication</h2>
                
                <div class="setup-section">
                    <h3>üìã Before You Begin</h3>
                    
                    <p><strong>1. Base URL:</strong> Replace <span class="variable">{{BASE_URL}}</span> with your API URL</p>
                    <div class="code-block">
                        <pre>Examples:
http://localhost:5000/api
https://api.yourapp.com/api</pre>
                    </div>
                    
                    <p style="margin-top: 15px;"><strong>2. Authentication Token:</strong> Replace <span class="variable">{{TOKEN}}</span> with your JWT token from login</p>
                    
                    <p style="margin-top: 15px;"><strong>3. Required Variables:</strong></p>
                    <table class="comparison-table">
                        <thead>
                            <tr>
                                <th>Variable</th>
                                <th>Description</th>
                                <th>Example</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><span class="variable">{{BASE_URL}}</span></td>
                                <td>Your API base URL</td>
                                <td>http://localhost:5000/api</td>
                            </tr>
                            <tr>
                                <td><span class="variable">{{TOKEN}}</span></td>
                                <td>JWT auth token (from login)</td>
                                <td>eyJhbGciOiJIUzI1NiIs...</td>
                            </tr>
                            <tr>
                                <td><span class="variable">{{CONSULTANT_ADMIN_ID}}</span></td>
                                <td>Consultant admin user ID</td>
                                <td>507f1f77bcf86cd799439011</td>
                            </tr>
                            <tr>
                                <td><span class="variable">{{CONSULTANT_ID}}</span></td>
                                <td>Consultant user ID</td>
                                <td>507f1f77bcf86cd799439012</td>
                            </tr>
                            <tr>
                                <td><span class="variable">{{CLIENT_ID}}</span></td>
                                <td>A real client ID</td>
                                <td>Greon001</td>
                            </tr>
                            <tr>
                                <td><span class="variable">{{TICKET_ID}}</span></td>
                                <td>Ticket ObjectId or ticketId</td>
                                <td>TKT-2025-00001</td>
                            </tr>
                            <tr>
                                <td><span class="variable">{{SUPPORT_USER_ID}}</span></td>
                                <td>Support user ObjectId</td>
                                <td>507f1f77bcf86cd799439013</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="test-case">
                    <h3>
                        <span class="test-number">1</span>
                        Login to Get Authentication Token
                    </h3>
                    <div class="test-case-description">
                        Login with your credentials to receive a JWT token for authenticated requests
                    </div>
                    
                    <div class="method-url">
                        <span class="method POST">POST</span>
                        <div class="url-box" onclick="copyText(this)">{{BASE_URL}}/auth/login</div>
                        <button class="copy-button" onclick="copyText(this.previousElementSibling)">üìã Copy URL</button>
                    </div>

                    <div class="headers-section">
                        <h4>üì® Headers</h4>
                        <div class="header-item">
                            Content-Type: application/json
                            <button class="copy-button" onclick="copyText(this.previousElementSibling)">üìã</button>
                        </div>
                    </div>

                    <div class="code-header">
                        <span class="code-title">üìÑ Request Body</span>
                        <button class="copy-button" onclick="copyCode(this)">üìã Copy Body</button>
                    </div>
                    <div class="code-block">
<pre>{
  "email": "consultant.admin@example.com",
  "password": "your-password"
}</pre>
                    </div>

                    <div class="expected-response">
                        <h4>‚úÖ Expected Response (200 OK)</h4>
                        <div class="code-block">
<pre>{
  "success": true,
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "user": {
    "_id": "507f1f77bcf86cd799439011",
    "userName": "Consultant Admin",
    "userType": "consultant_admin",
    "email": "consultant.admin@example.com"
  }
}</pre>
                        </div>
                    </div>

                    <div class="note">
                        <strong>üí° Important:</strong> Copy the <code>token</code> value from the response. Use it in the Authorization header for all subsequent requests as: <code>Bearer YOUR_TOKEN_HERE</code>
                    </div>
                </div>
            </div>

            <!-- NEW: Consultant Internal Issues Section -->
            <div id="consultant-internal" class="section">
                <h2 class="section-title">üÜï Consultant Internal Issues (NEW)</h2>

                <div class="success">
                    <strong>‚ú® What's New:</strong> Consultants and consultant_admins can now create tickets for their own internal issues WITHOUT providing a clientId. The system automatically uses <code>clientId = "INTERNAL-SUPPORT"</code>
                </div>

                <div class="scenario-card">
                    <h4>üìñ How It Works</h4>
                    <p><strong>Problem Solved:</strong> Consultants don't have a clientId in their user profile, so they couldn't create tickets for their own support needs.</p>
                    <p><strong>Solution:</strong> When consultants omit clientId from the request, the system automatically sets <code>clientId = "INTERNAL-SUPPORT"</code> and routes the ticket to the consultant's assigned support manager.</p>
                </div>

                <!-- Test Case 1: Consultant Creates Internal Issue -->
                <div class="test-case new-feature">
                    <h3>
                        <span class="test-number">1</span>
                        Consultant Creates Internal Issue (No ClientId)
                    </h3>
                    <div class="test-case-description">
                        üéØ Consultant needs help with platform functionality, NOT related to any specific client
                    </div>
                    
                    <div class="method-url">
                        <span class="method POST">POST</span>
                        <div class="url-box" onclick="copyText(this)">{{BASE_URL}}/tickets</div>
                        <button class="copy-button" onclick="copyText(this.previousElementSibling)">üìã Copy URL</button>
                    </div>

                    <div class="headers-section">
                        <h4>üì® Headers</h4>
                        <div class="header-item">
                            Content-Type: application/json
                            <button class="copy-button" onclick="copyText(this.previousElementSibling)">üìã</button>
                        </div>
                        <div class="header-item">
                            Authorization: Bearer {{TOKEN}}
                            <button class="copy-button" onclick="copyText(this.previousElementSibling)">üìã</button>
                        </div>
                    </div>

                    <div class="code-header">
                        <span class="code-title">üìÑ Request Body (NO clientId field)</span>
                        <button class="copy-button" onclick="copyCode(this)">üìã Copy Body</button>
                    </div>
                    <div class="code-block">
<pre>{
  "category": "Consultant Support",
  "subject": "How do I access the emissions dashboard?",
  "description": "I'm trying to find where to view emissions data for my clients but cannot locate the dashboard section. Can someone guide me through the navigation?",
  "priority": "medium",
  "tags": ["platform-help", "navigation"]
}</pre>
                    </div>

                    <div class="warning">
                        <strong>‚ö†Ô∏è Notice:</strong> No <code>clientId</code> field in the request body! The system will automatically set it to "INTERNAL-SUPPORT"
                    </div>

                    <div class="expected-response">
                        <h4>‚úÖ Expected Response (201 Created)</h4>
                        <div class="code-block">
<pre>{
  "success": true,
  "message": "Ticket created successfully",
  "ticket": {
    "ticketId": "TKT-2025-00001",
    "clientId": "INTERNAL-SUPPORT",
    "createdBy": {
      "_id": "507f1f77bcf86cd799439012",
      "userName": "Consultant John",
      "userType": "consultant"
    },
    "consultantContext": {
      "isConsultantIssue": true,
      "consultantAdminId": "507f1f77bcf86cd799439011",
      "consultantAdminName": "Admin Sarah",
      "assignedConsultantId": "507f1f77bcf86cd799439012",
      "assignedConsultantName": "Consultant John",
      "contextSetAt": "2025-01-22T10:30:00.000Z"
    },
    "supportManagerId": {
      "_id": "507f1f77bcf86cd799439020",
      "userName": "Support Manager Alice",
      "supportTeamName": "Consultant Support Team"
    },
    "status": "open",
    "category": "Consultant Support",
    "priority": "medium",
    "subject": "How do I access the emissions dashboard?",
    "dueDate": "2025-01-25T10:30:00.000Z"
  },
  "isConsultantIssue": true,
  "isInternalIssue": true,
  "supportManagerAssigned": true
}</pre>
                        </div>
                    </div>

                    <div class="key-check">
                        <strong>üîç Key Checks - Verify These Values:</strong>
                        <ul>
                            <li>‚úÖ <code>clientId</code> should be <span class="highlight">"INTERNAL-SUPPORT"</span></li>
                            <li>‚úÖ <code>consultantContext.isConsultantIssue</code> should be <span class="highlight">true</span></li>
                            <li>‚úÖ <code>isInternalIssue</code> should be <span class="highlight">true</span></li>
                            <li>‚úÖ <code>supportManagerId</code> should be the consultant's assigned support manager</li>
                            <li>‚úÖ <code>consultantContext.consultantAdminId</code> and <code>assignedConsultantId</code> should be populated</li>
                        </ul>
                    </div>
                </div>

                <!-- Test Case 2: Consultant Admin Creates Internal Issue -->
                <div class="test-case new-feature">
                    <h3>
                        <span class="test-number">2</span>
                        Consultant Admin Creates Internal Issue
                    </h3>
                    <div class="test-case-description">
                        üéØ Consultant admin needs help with team management or platform features
                    </div>
                    
                    <div class="method-url">
                        <span class="method POST">POST</span>
                        <div class="url-box" onclick="copyText(this)">{{BASE_URL}}/tickets</div>
                        <button class="copy-button" onclick="copyText(this.previousElementSibling)">üìã Copy URL</button>
                    </div>

                    <div class="headers-section">
                        <h4>üì® Headers</h4>
                        <div class="header-item">
                            Content-Type: application/json
                            <button class="copy-button" onclick="copyText(this.previousElementSibling)">üìã</button>
                        </div>
                        <div class="header-item">
                            Authorization: Bearer {{TOKEN}}
                            <button class="copy-button" onclick="copyText(this.previousElementSibling)">üìã</button>
                        </div>
                    </div>

                    <div class="code-header">
                        <span class="code-title">üìÑ Request Body (NO clientId)</span>
                        <button class="copy-button" onclick="copyCode(this)">üìã Copy Body</button>
                    </div>
                    <div class="code-block">
<pre>{
  "category": "Consultant Support",
  "subject": "How do I add new consultants to my team?",
  "description": "I just hired two new consultants and need to add them to the platform. What are the steps for team member onboarding?",
  "priority": "low",
  "tags": ["team-management", "onboarding"]
}</pre>
                    </div>

                    <div class="expected-response">
                        <h4>‚úÖ Expected Response (201 Created)</h4>
                        <div class="code-block">
<pre>{
  "success": true,
  "ticket": {
    "ticketId": "TKT-2025-00002",
    "clientId": "INTERNAL-SUPPORT",
    "consultantContext": {
      "isConsultantIssue": true,
      "consultantAdminId": "507f1f77bcf86cd799439011",
      "consultantAdminName": "Consultant Admin Sarah"
    },
    "supportManagerId": {...}
  },
  "isConsultantIssue": true,
  "isInternalIssue": true
}</pre>
                        </div>
                    </div>
                </div>

                <!-- Test Case 3: Consultant Creates Client-Related Issue WITH ClientId -->
                <div class="test-case new-feature">
                    <h3>
                        <span class="test-number">3</span>
                        Consultant Creates Client-Related Issue (WITH ClientId)
                    </h3>
                    <div class="test-case-description">
                        üéØ Consultant needs help with a SPECIFIC client's data or issue
                    </div>
                    
                    <div class="method-url">
                        <span class="method POST">POST</span>
                        <div class="url-box" onclick="copyText(this)">{{BASE_URL}}/tickets</div>
                        <button class="copy-button" onclick="copyText(this.previousElementSibling)">üìã Copy URL</button>
                    </div>

                    <div class="headers-section">
                        <h4>üì® Headers</h4>
                        <div class="header-item">
                            Content-Type: application/json
                            <button class="copy-button" onclick="copyText(this.previousElementSibling)">üìã</button>
                        </div>
                        <div class="header-item">
                            Authorization: Bearer {{TOKEN}}
                            <button class="copy-button" onclick="copyText(this.previousElementSibling)">üìã</button>
                        </div>
                    </div>

                    <div class="code-header">
                        <span class="code-title">üìÑ Request Body (WITH clientId)</span>
                        <button class="copy-button" onclick="copyCode(this)">üìã Copy Body</button>
                    </div>
                    <div class="code-block">
<pre>{
  "clientId": "{{CLIENT_ID}}",
  "category": "Data Issues",
  "subject": "Client ABC Corp - Q4 emissions data seems incorrect",
  "description": "The Q4 emissions data for ABC Corp shows unusually high values in Scope 2. Can the support team review the calculation methodology?",
  "priority": "high",
  "tags": ["data-review", "Q4", "scope-2"]
}</pre>
                    </div>

                    <div class="success">
                        <strong>‚úÖ Notice:</strong> ClientId IS provided, so this is NOT an internal issue - it's client-related
                    </div>

                    <div class="expected-response">
                        <h4>‚úÖ Expected Response (201 Created)</h4>
                        <div class="code-block">
<pre>{
  "success": true,
  "ticket": {
    "ticketId": "TKT-2025-00003",
    "clientId": "Greon001",
    "consultantContext": {
      "isConsultantIssue": false,
      "consultantAdminId": "507f1f77bcf86cd799439011",
      "assignedConsultantId": "507f1f77bcf86cd799439012"
    }
  },
  "isConsultantIssue": false,
  "isInternalIssue": false
}</pre>
                        </div>
                    </div>

                    <div class="key-check">
                        <strong>üîç Key Checks:</strong>
                        <ul>
                            <li>‚úÖ Uses provided <code>clientId</code> (NOT INTERNAL-SUPPORT)</li>
                            <li>‚úÖ <code>isConsultantIssue</code> is <span class="highlight">false</span></li>
                            <li>‚úÖ <code>isInternalIssue</code> is <span class="highlight">false</span></li>
                            <li>‚úÖ Routes to client's support manager OR consultant's support manager</li>
                        </ul>
                    </div>
                </div>

                <!-- Test Case 4: Client User CANNOT Create Without ClientId -->
                <div class="test-case new-feature">
                    <h3>
                        <span class="test-number">4</span>
                        Client User Tries Without ClientId (Should FAIL)
                    </h3>
                    <div class="test-case-description">
                        üéØ Validation test: Client users MUST provide clientId
                    </div>
                    
                    <div class="method-url">
                        <span class="method POST">POST</span>
                        <div class="url-box" onclick="copyText(this)">{{BASE_URL}}/tickets</div>
                        <button class="copy-button" onclick="copyText(this.previousElementSibling)">üìã Copy URL</button>
                    </div>

                    <div class="headers-section">
                        <h4>üì® Headers</h4>
                        <div class="header-item">
                            Content-Type: application/json
                            <button class="copy-button" onclick="copyText(this.previousElementSibling)">üìã</button>
                        </div>
                        <div class="header-item">
                            Authorization: Bearer {{TOKEN}}
                            <button class="copy-button" onclick="copyText(this.previousElementSibling)">üìã</button>
                        </div>
                    </div>

                    <div class="code-header">
                        <span class="code-title">üìÑ Request Body (Missing clientId - WILL FAIL)</span>
                        <button class="copy-button" onclick="copyCode(this)">üìã Copy Body</button>
                    </div>
                    <div class="code-block">
<pre>{
  "category": "Data Issues",
  "subject": "Cannot upload CSV file",
  "description": "Getting error when uploading",
  "priority": "high"
}</pre>
                    </div>

                    <div class="error-response">
                        <h4>‚ùå Expected Response (400 Bad Request)</h4>
                        <div class="code-block">
<pre>{
  "success": false,
  "message": "clientId is required for client users"
}</pre>
                        </div>
                    </div>

                    <div class="key-check">
                        <strong>üîç Key Check:</strong>
                        <ul>
                            <li>‚úÖ Client users get validation error without clientId</li>
                            <li>‚úÖ Only consultant/consultant_admin can omit clientId</li>
                        </ul>
                    </div>
                </div>

                <!-- Test Case 5: View Internal Issues Only -->
                <div class="test-case new-feature">
                    <h3>
                        <span class="test-number">5</span>
                        View Only Internal Issues (INTERNAL-SUPPORT)
                    </h3>
                    <div class="test-case-description">
                        üéØ Filter to see only consultant internal support tickets
                    </div>
                    
                    <div class="method-url">
                        <span class="method GET">GET</span>
                        <div class="url-box" onclick="copyText(this)">{{BASE_URL}}/tickets?clientId=INTERNAL-SUPPORT&createdBy=me</div>
                        <button class="copy-button" onclick="copyText(this.previousElementSibling)">üìã Copy URL</button>
                    </div>

                    <div class="headers-section">
                        <h4>üì® Headers</h4>
                        <div class="header-item">
                            Authorization: Bearer {{TOKEN}}
                            <button class="copy-button" onclick="copyText(this.previousElementSibling)">üìã</button>
                        </div>
                    </div>

                    <div class="expected-response">
                        <h4>‚úÖ Expected Response (200 OK)</h4>
                        <div class="code-block">
<pre>{
  "success": true,
  "tickets": [
    {
      "ticketId": "TKT-2025-00001",
      "clientId": "INTERNAL-SUPPORT",
      "subject": "How do I access the emissions dashboard?",
      "consultantContext": {
        "isConsultantIssue": true
      },
      "status": "open"
    },
    {
      "ticketId": "TKT-2025-00002",
      "clientId": "INTERNAL-SUPPORT",
      "subject": "How do I add new consultants to my team?",
      "consultantContext": {
        "isConsultantIssue": true
      },
      "status": "open"
    }
  ],
  "pagination": {
    "total": 2,
    "page": 1,
    "limit": 20
  }
}</pre>
                        </div>
                    </div>

                    <div class="note">
                        <strong>üí° Tip:</strong> Use <code>clientId=INTERNAL-SUPPORT</code> to filter only internal consultant issues
                    </div>
                </div>

                <!-- Test Case 6: View Client Issues (Exclude Internal) -->
                <div class="test-case new-feature">
                    <h3>
                        <span class="test-number">6</span>
                        View Client Issues Only (Exclude INTERNAL-SUPPORT)
                    </h3>
                    <div class="test-case-description">
                        üéØ Filter to see only real client tickets, excluding internal issues
                    </div>
                    
                    <div class="method-url">
                        <span class="method GET">GET</span>
                        <div class="url-box" onclick="copyText(this)">{{BASE_URL}}/tickets?assignedConsultantId={{CONSULTANT_ID}}&isConsultantIssue=false</div>
                        <button class="copy-button" onclick="copyText(this.previousElementSibling)">üìã Copy URL</button>
                    </div>

                    <div class="headers-section">
                        <h4>üì® Headers</h4>
                        <div class="header-item">
                            Authorization: Bearer {{TOKEN}}
                            <button class="copy-button" onclick="copyText(this.previousElementSibling)">üìã</button>
                        </div>
                    </div>

                    <div class="expected-response">
                        <h4>‚úÖ Expected Response (200 OK)</h4>
                        <div class="code-block">
<pre>{
  "success": true,
  "tickets": [
    {
      "ticketId": "TKT-2025-00003",
      "clientId": "Greon001",
      "subject": "Client ABC Corp - Q4 emissions data...",
      "consultantContext": {
        "isConsultantIssue": false,
        "assignedConsultantId": "507f1f77bcf86cd799439012"
      }
    }
  ]
}</pre>
                        </div>
                    </div>

                    <div class="note">
                        <strong>üí° Tip:</strong> Use <code>isConsultantIssue=false</code> to exclude internal consultant issues
                    </div>
                </div>

                <!-- Test Case 7: Dashboard Shows Separation -->
                <div class="test-case new-feature">
                    <h3>
                        <span class="test-number">7</span>
                        Consultant Dashboard - My Issues vs Client Issues
                    </h3>
                    <div class="test-case-description">
                        üéØ Get comprehensive overview showing internal issues separate from client issues
                    </div>
                    
                    <div class="method-url">
                        <span class="method GET">GET</span>
                        <div class="url-box" onclick="copyText(this)">{{BASE_URL}}/tickets/consultant-overview</div>
                        <button class="copy-button" onclick="copyText(this.previousElementSibling)">üìã Copy URL</button>
                    </div>

                    <div class="headers-section">
                        <h4>üì® Headers</h4>
                        <div class="header-item">
                            Authorization: Bearer {{TOKEN}}
                            <button class="copy-button" onclick="copyText(this.previousElementSibling)">üìã</button>
                        </div>
                    </div>

                    <div class="expected-response">
                        <h4>‚úÖ Expected Response (200 OK)</h4>
                        <div class="code-block">
<pre>{
  "success": true,
  "overview": {
    "myIssues": {
      "total": 5,
      "open": 2,
      "resolved": 3,
      "closed": 0
    },
    "clientIssues": {
      "total": 23,
      "open": 8,
      "resolved": 12,
      "closed": 3
    },
    "byClient": [
      {
        "clientId": "Greon001",
        "companyName": "ABC Corp",
        "total": 12,
        "open": 4,
        "resolved": 6,
        "closed": 2
      },
      {
        "clientId": "Greon002",
        "companyName": "XYZ Industries",
        "total": 11,
        "open": 4,
        "resolved": 6,
        "closed": 1
      }
    ],
    "supportTeams": [...],
    "recentTickets": [...]
  }
}</pre>
                        </div>
                    </div>

                    <div class="key-check">
                        <strong>üîç Key Checks:</strong>
                        <ul>
                            <li>‚úÖ <code>myIssues</code> = Internal INTERNAL-SUPPORT tickets created by consultant</li>
                            <li>‚úÖ <code>clientIssues</code> = Real client tickets (excludes INTERNAL-SUPPORT)</li>
                            <li>‚úÖ <code>byClient</code> array does NOT include INTERNAL-SUPPORT</li>
                        </ul>
                    </div>
                </div>

                <!-- Test Case 8: Client User Cannot Access Internal Issues -->
                <div class="test-case new-feature">
                    <h3>
                        <span class="test-number">8</span>
                        Client User CANNOT Access Internal Issues
                    </h3>
                    <div class="test-case-description">
                        üéØ Security test: Client users should be blocked from viewing INTERNAL-SUPPORT tickets
                    </div>
                    
                    <div class="method-url">
                        <span class="method GET">GET</span>
                        <div class="url-box" onclick="copyText(this)">{{BASE_URL}}/tickets/TKT-2025-00001</div>
                        <button class="copy-button" onclick="copyText(this.previousElementSibling)">üìã Copy URL</button>
                    </div>

                    <div class="headers-section">
                        <h4>üì® Headers</h4>
                        <div class="header-item">
                            Authorization: Bearer {{TOKEN}}
                            <button class="copy-button" onclick="copyText(this.previousElementSibling)">üìã</button>
                        </div>
                    </div>

                    <div class="note">
                        <strong>üìù Assumption:</strong> TKT-2025-00001 has <code>clientId = "INTERNAL-SUPPORT"</code>
                    </div>

                    <div class="error-response">
                        <h4>‚ùå Expected Response (403 Forbidden)</h4>
                        <div class="code-block">
<pre>{
  "success": false,
  "message": "No access to ticket"
}</pre>
                        </div>
                    </div>

                    <div class="key-check">
                        <strong>üîç Key Check:</strong>
                        <ul>
                            <li>‚úÖ Client users are blocked from viewing INTERNAL-SUPPORT tickets</li>
                        </ul>
                    </div>
                </div>

                <!-- Comparison Table -->
                <div style="margin-top: 30px;">
                    <h3>üìä Quick Comparison: Internal vs Client Issues</h3>
                    <table class="comparison-table">
                        <thead>
                            <tr>
                                <th>Aspect</th>
                                <th>Internal Issue</th>
                                <th>Client Issue</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>ClientId in Request</strong></td>
                                <td>‚ùå Not provided (omitted)</td>
                                <td>‚úÖ Provided (e.g., "Greon001")</td>
                            </tr>
                            <tr>
                                <td><strong>ClientId in Database</strong></td>
                                <td>"INTERNAL-SUPPORT"</td>
                                <td>Real client ID</td>
                            </tr>
                            <tr>
                                <td><strong>isConsultantIssue</strong></td>
                                <td>true</td>
                                <td>false</td>
                            </tr>
                            <tr>
                                <td><strong>Routed To</strong></td>
                                <td>Consultant's support manager</td>
                                <td>Client's support manager</td>
                            </tr>
                            <tr>
                                <td><strong>Typical Categories</strong></td>
                                <td>Consultant Support, System Access</td>
                                <td>Data Issues, Client Management</td>
                            </tr>
                            <tr>
                                <td><strong>Client Notifications</strong></td>
                                <td>‚ùå None (internal only)</td>
                                <td>‚úÖ Yes (consultant admin + consultant)</td>
                            </tr>
                            <tr>
                                <td><strong>Dashboard Section</strong></td>
                                <td>"My Issues"</td>
                                <td>"Client Issues"</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Continue with other sections... -->
            <!-- I'll add abbreviated versions of the remaining sections for brevity -->

            <!-- Consultant Admin Section -->
            <div id="consultant-admin" class="section">
                <h2 class="section-title">üëî Consultant Admin Test Cases</h2>

                <div class="test-case">
                    <h3>
                        <span class="test-number">1</span>
                        View All Client Tickets
                    </h3>
                    <div class="test-case-description">
                        Get all tickets from clients created by this consultant admin
                    </div>
                    
                    <div class="method-url">
                        <span class="method GET">GET</span>
                        <div class="url-box" onclick="copyText(this)">{{BASE_URL}}/tickets?consultantAdminId={{CONSULTANT_ADMIN_ID}}</div>
                        <button class="copy-button" onclick="copyText(this.previousElementSibling)">üìã Copy URL</button>
                    </div>

                    <div class="headers-section">
                        <h4>üì® Headers</h4>
                        <div class="header-item">
                            Authorization: Bearer {{TOKEN}}
                            <button class="copy-button" onclick="copyText(this.previousElementSibling)">üìã</button>
                        </div>
                    </div>

                    <div class="note">
                        <strong>üí° Note:</strong> If logged in as consultant_admin, you can also use just <code>/tickets</code> and it will auto-filter to your clients
                    </div>
                </div>

                <div class="test-case">
                    <h3>
                        <span class="test-number">2</span>
                        Filter Open High Priority Tickets
                    </h3>
                    <div class="test-case-description">
                        Get only open, high priority tickets from your clients
                    </div>
                    
                    <div class="method-url">
                        <span class="method GET">GET</span>
                        <div class="url-box" onclick="copyText(this)">{{BASE_URL}}/tickets?consultantAdminId={{CONSULTANT_ADMIN_ID}}&status=open,in_progress&priority=high,critical</div>
                        <button class="copy-button" onclick="copyText(this.previousElementSibling)">üìã Copy URL</button>
                    </div>

                    <div class="headers-section">
                        <h4>üì® Headers</h4>
                        <div class="header-item">
                            Authorization: Bearer {{TOKEN}}
                            <button class="copy-button" onclick="copyText(this.previousElementSibling)">üìã</button>
                        </div>
                    </div>
                </div>

                <div class="test-case">
                    <h3>
                        <span class="test-number">3</span>
                        Get Statistics with Consultant Breakdown
                    </h3>
                    <div class="test-case-description">
                        Get detailed statistics for all your clients
                    </div>
                    
                    <div class="method-url">
                        <span class="method GET">GET</span>
                        <div class="url-box" onclick="copyText(this)">{{BASE_URL}}/tickets/stats?consultantAdminId={{CONSULTANT_ADMIN_ID}}</div>
                        <button class="copy-button" onclick="copyText(this.previousElementSibling)">üìã Copy URL</button>
                    </div>

                    <div class="headers-section">
                        <h4>üì® Headers</h4>
                        <div class="header-item">
                            Authorization: Bearer {{TOKEN}}
                            <button class="copy-button" onclick="copyText(this.previousElementSibling)">üìã</button>
                        </div>
                    </div>

                    <div class="expected-response">
                        <h4>‚úÖ Expected Response (200 OK)</h4>
                        <div class="code-block">
<pre>{
  "success": true,
  "stats": {
    "total": 150,
    "consultant": {
      "consultantIssues": 15,
      "clientIssues": 135,
      "byConsultantAdmin": [...]
    }
  }
}</pre>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Client Users Section -->
            <div id="client" class="section">
                <h2 class="section-title">üè¢ Client User Test Cases</h2>

                <div class="warning">
                    <strong>‚ö†Ô∏è Important:</strong> Client users MUST provide <code>clientId</code> in all ticket creation requests. They cannot create INTERNAL-SUPPORT tickets.
                </div>

                <div class="test-case">
                    <h3>
                        <span class="test-number">1</span>
                        Create Ticket (ClientId REQUIRED)
                    </h3>
                    <div class="test-case-description">
                        Client user creates a support ticket for their organization
                    </div>
                    
                    <div class="method-url">
                        <span class="method POST">POST</span>
                        <div class="url-box" onclick="copyText(this)">{{BASE_URL}}/tickets</div>
                        <button class="copy-button" onclick="copyText(this.previousElementSibling)">üìã Copy URL</button>
                    </div>

                    <div class="headers-section">
                        <h4>üì® Headers</h4>
                        <div class="header-item">
                            Content-Type: application/json
                            <button class="copy-button" onclick="copyText(this.previousElementSibling)">üìã</button>
                        </div>
                        <div class="header-item">
                            Authorization: Bearer {{TOKEN}}
                            <button class="copy-button" onclick="copyText(this.previousElementSibling)">üìã</button>
                        </div>
                    </div>

                    <div class="code-header">
                        <span class="code-title">üìÑ Request Body (clientId REQUIRED)</span>
                        <button class="copy-button" onclick="copyCode(this)">üìã Copy Body</button>
                    </div>
                    <div class="code-block">
<pre>{
  "clientId": "{{CLIENT_ID}}",
  "category": "Data Issues",
  "subject": "Cannot upload emissions data CSV",
  "description": "When I try to upload our Q4 emissions data CSV file, I get an error message 'Invalid file format'. The file is in the correct format according to the documentation.",
  "priority": "high",
  "tags": ["data-upload", "csv", "Q4"]
}</pre>
                    </div>

                    <div class="expected-response">
                        <h4>‚úÖ Expected Response (201 Created)</h4>
                        <div class="code-block">
<pre>{
  "success": true,
  "ticket": {
    "ticketId": "TKT-2025-00010",
    "clientId": "Greon001",
    "consultantContext": {
      "isConsultantIssue": false,
      "consultantAdminId": "...",
      "assignedConsultantId": "..."
    }
  }
}</pre>
                        </div>
                    </div>

                    <div class="key-check">
                        <strong>üîç Key Checks:</strong>
                        <ul>
                            <li>‚úÖ Consultant admin and consultant are notified</li>
                            <li>‚úÖ Support manager auto-assigned</li>
                            <li>‚úÖ Uses real clientId (not INTERNAL-SUPPORT)</li>
                        </ul>
                    </div>
                </div>

                <div class="test-case">
                    <h3>
                        <span class="test-number">2</span>
                        View Organization Tickets
                    </h3>
                    <div class="test-case-description">
                        Get all tickets for my client organization
                    </div>
                    
                    <div class="method-url">
                        <span class="method GET">GET</span>
                        <div class="url-box" onclick="copyText(this)">{{BASE_URL}}/tickets</div>
                        <button class="copy-button" onclick="copyText(this.previousElementSibling)">üìã Copy URL</button>
                    </div>

                    <div class="headers-section">
                        <h4>üì® Headers</h4>
                        <div class="header-item">
                            Authorization: Bearer {{TOKEN}}
                            <button class="copy-button" onclick="copyText(this.previousElementSibling)">üìã</button>
                        </div>
                    </div>

                    <div class="note">
                        <strong>üí° Note:</strong> Client users automatically see only tickets from their organization. They CANNOT see INTERNAL-SUPPORT tickets.
                    </div>
                </div>
            </div>

            <!-- Support Manager Section -->
            <div id="support-manager" class="section">
                <h2 class="section-title">üõ†Ô∏è Support Manager Test Cases</h2>

                <div class="success">
                    <strong>‚ú® Note:</strong> Support managers can see BOTH internal consultant issues (INTERNAL-SUPPORT) AND client tickets in their queue
                </div>

                <div class="test-case">
                    <h3>
                        <span class="test-number">1</span>
                        View My Team's Queue (All Tickets)
                    </h3>
                    <div class="test-case-description">
                        Get all tickets assigned to my support team, including internal issues
                    </div>
                    
                    <div class="method-url">
                        <span class="method GET">GET</span>
                        <div class="url-box" onclick="copyText(this)">{{BASE_URL}}/tickets</div>
                        <button class="copy-button" onclick="copyText(this.previousElementSibling)">üìã Copy URL</button>
                    </div>

                    <div class="headers-section">
                        <h4>üì® Headers</h4>
                        <div class="header-item">
                            Authorization: Bearer {{TOKEN}}
                            <button class="copy-button" onclick="copyText(this.previousElementSibling)">üìã</button>
                        </div>
                    </div>

                    <div class="expected-response">
                        <h4>‚úÖ Expected Response (200 OK)</h4>
                        <div class="code-block">
<pre>{
  "success": true,
  "tickets": [
    {
      "ticketId": "TKT-2025-00001",
      "clientId": "INTERNAL-SUPPORT",
      "createdByType": "consultant",
      "consultantContext": {
        "isConsultantIssue": true
      }
    },
    {
      "ticketId": "TKT-2025-00010",
      "clientId": "Greon001",
      "createdByType": "client_admin",
      "consultantContext": {
        "isConsultantIssue": false
      }
    }
  ]
}</pre>
                        </div>
                    </div>
                </div>

                <div class="test-case">
                    <h3>
                        <span class="test-number">2</span>
                        View Only Consultant Internal Issues
                    </h3>
                    <div class="test-case-description">
                        Filter to see only INTERNAL-SUPPORT tickets
                    </div>
                    
                    <div class="method-url">
                        <span class="method GET">GET</span>
                        <div class="url-box" onclick="copyText(this)">{{BASE_URL}}/tickets?clientId=INTERNAL-SUPPORT</div>
                        <button class="copy-button" onclick="copyText(this.previousElementSibling)">üìã Copy URL</button>
                    </div>

                    <div class="headers-section">
                        <h4>üì® Headers</h4>
                        <div class="header-item">
                            Authorization: Bearer {{TOKEN}}
                            <button class="copy-button" onclick="copyText(this.previousElementSibling)">üìã</button>
                        </div>
                    </div>
                </div>

                <div class="test-case">
                    <h3>
                        <span class="test-number">3</span>
                        Assign Ticket to Support User
                    </h3>
                    <div class="test-case-description">
                        Assign a ticket (internal or client) to a team member
                    </div>
                    
                    <div class="method-url">
                        <span class="method POST">POST</span>
                        <div class="url-box" onclick="copyText(this)">{{BASE_URL}}/tickets/{{TICKET_ID}}/assign</div>
                        <button class="copy-button" onclick="copyText(this.previousElementSibling)">üìã Copy URL</button>
                    </div>

                    <div class="headers-section">
                        <h4>üì® Headers</h4>
                        <div class="header-item">
                            Content-Type: application/json
                            <button class="copy-button" onclick="copyText(this.previousElementSibling)">üìã</button>
                        </div>
                        <div class="header-item">
                            Authorization: Bearer {{TOKEN}}
                            <button class="copy-button" onclick="copyText(this.previousElementSibling)">üìã</button>
                        </div>
                    </div>

                    <div class="code-header">
                        <span class="code-title">üìÑ Request Body</span>
                        <button class="copy-button" onclick="copyCode(this)">üìã Copy Body</button>
                    </div>
                    <div class="code-block">
<pre>{
  "assignTo": "{{SUPPORT_USER_ID}}"
}</pre>
                    </div>

                    <div class="note">
                        <strong>üí° Note:</strong> Works for both INTERNAL-SUPPORT and regular client tickets
                    </div>
                </div>
            </div>

            <!-- Support User Section -->
            <div id="support-user" class="section">
                <h2 class="section-title">üéß Support User Test Cases</h2>

                <div class="test-case">
                    <h3>
                        <span class="test-number">1</span>
                        View My Assigned Tickets
                    </h3>
                    <div class="test-case-description">
                        Get all tickets assigned to me (including internal issues)
                    </div>
                    
                    <div class="method-url">
                        <span class="method GET">GET</span>
                        <div class="url-box" onclick="copyText(this)">{{BASE_URL}}/tickets?assignedTo=me</div>
                        <button class="copy-button" onclick="copyText(this.previousElementSibling)">üìã Copy URL</button>
                    </div>

                    <div class="headers-section">
                        <h4>üì® Headers</h4>
                        <div class="header-item">
                            Authorization: Bearer {{TOKEN}}
                            <button class="copy-button" onclick="copyText(this.previousElementSibling)">üìã</button>
                        </div>
                    </div>
                </div>

                <div class="test-case">
                    <h3>
                        <span class="test-number">2</span>
                        Resolve Ticket (Internal or Client)
                    </h3>
                    <div class="test-case-description">
                        Mark a ticket as resolved with resolution notes
                    </div>
                    
                    <div class="method-url">
                        <span class="method POST">POST</span>
                        <div class="url-box" onclick="copyText(this)">{{BASE_URL}}/tickets/{{TICKET_ID}}/resolve</div>
                        <button class="copy-button" onclick="copyText(this.previousElementSibling)">üìã Copy URL</button>
                    </div>

                    <div class="headers-section">
                        <h4>üì® Headers</h4>
                        <div class="header-item">
                            Content-Type: application/json
                            <button class="copy-button" onclick="copyText(this.previousElementSibling)">üìã</button>
                        </div>
                        <div class="header-item">
                            Authorization: Bearer {{TOKEN}}
                            <button class="copy-button" onclick="copyText(this.previousElementSibling)">üìã</button>
                        </div>
                    </div>

                    <div class="code-header">
                        <span class="code-title">üìÑ Request Body</span>
                        <button class="copy-button" onclick="copyCode(this)">üìã Copy Body</button>
                    </div>
                    <div class="code-block">
<pre>{
  "resolutionNotes": "Guided consultant through the dashboard navigation. They can now access all client emissions data successfully."
}</pre>
                    </div>

                    <div class="note">
                        <strong>üí° Note:</strong> Works for both INTERNAL-SUPPORT and client tickets
                    </div>
                </div>
            </div>

            <!-- Common Operations Section -->
            <div id="common" class="section">
                <h2 class="section-title">‚öôÔ∏è Common Operations</h2>

                <div class="test-case">
                    <h3>
                        <span class="test-number">1</span>
                        Get Ticket Details
                    </h3>
                    <div class="test-case-description">
                        Get full details of any ticket (internal or client)
                    </div>
                    
                    <div class="method-url">
                        <span class="method GET">GET</span>
                        <div class="url-box" onclick="copyText(this)">{{BASE_URL}}/tickets/{{TICKET_ID}}</div>
                        <button class="copy-button" onclick="copyText(this.previousElementSibling)">üìã Copy URL</button>
                    </div>

                    <div class="headers-section">
                        <h4>üì® Headers</h4>
                        <div class="header-item">
                            Authorization: Bearer {{TOKEN}}
                            <button class="copy-button" onclick="copyText(this.previousElementSibling)">üìã</button>
                        </div>
                    </div>
                </div>

                <div class="test-case">
                    <h3>
                        <span class="test-number">2</span>
                        Search Tickets by Text
                    </h3>
                    <div class="test-case-description">
                        Search across all accessible tickets (respects access controls)
                    </div>
                    
                    <div class="method-url">
                        <span class="method GET">GET</span>
                        <div class="url-box" onclick="copyText(this)">{{BASE_URL}}/tickets?search=dashboard navigation</div>
                        <button class="copy-button" onclick="copyText(this.previousElementSibling)">üìã Copy URL</button>
                    </div>

                    <div class="headers-section">
                        <h4>üì® Headers</h4>
                        <div class="header-item">
                            Authorization: Bearer {{TOKEN}}
                            <button class="copy-button" onclick="copyText(this.previousElementSibling)">üìã</button>
                        </div>
                    </div>
                </div>

                <div class="test-case">
                    <h3>
                        <span class="test-number">3</span>
                        Add Comment to Ticket
                    </h3>
                    <div class="test-case-description">
                        Add a comment to any ticket (internal or client)
                    </div>
                    
                    <div class="method-url">
                        <span class="method POST">POST</span>
                        <div class="url-box" onclick="copyText(this)">{{BASE_URL}}/tickets/{{TICKET_ID}}/comments</div>
                        <button class="copy-button" onclick="copyText(this.previousElementSibling)">üìã Copy URL</button>
                    </div>

                    <div class="headers-section">
                        <h4>üì® Headers</h4>
                        <div class="header-item">
                            Content-Type: application/json
                            <button class="copy-button" onclick="copyText(this.previousElementSibling)">üìã</button>
                        </div>
                        <div class="header-item">
                            Authorization: Bearer {{TOKEN}}
                            <button class="copy-button" onclick="copyText(this.previousElementSibling)">üìã</button>
                        </div>
                    </div>

                    <div class="code-header">
                        <span class="code-title">üìÑ Request Body</span>
                        <button class="copy-button" onclick="copyCode(this)">üìã Copy Body</button>
                    </div>
                    <div class="code-block">
<pre>{
  "text": "The dashboard is located in the main navigation menu under 'Analytics'. Let me know if you need further assistance.",
  "isInternal": false
}</pre>
                    </div>
                </div>
            </div>

            <!-- Consultant Section -->
            <div id="consultant" class="section">
                <h2 class="section-title">üíº Consultant Test Cases</h2>

                <div class="note">
                    <strong>üí° Reminder:</strong> Consultants can create tickets WITHOUT clientId (uses INTERNAL-SUPPORT) OR WITH clientId (for client-specific issues)
                </div>

                <div class="test-case">
                    <h3>
                        <span class="test-number">1</span>
                        View Assigned Client Tickets
                    </h3>
                    <div class="test-case-description">
                        Get all tickets from clients assigned to me
                    </div>
                    
                    <div class="method-url">
                        <span class="method GET">GET</span>
                        <div class="url-box" onclick="copyText(this)">{{BASE_URL}}/tickets?assignedConsultantId={{CONSULTANT_ID}}</div>
                        <button class="copy-button" onclick="copyText(this.previousElementSibling)">üìã Copy URL</button>
                    </div>

                    <div class="headers-section">
                        <h4>üì® Headers</h4>
                        <div class="header-item">
                            Authorization: Bearer {{TOKEN}}
                            <button class="copy-button" onclick="copyText(this.previousElementSibling)">üìã</button>
                        </div>
                    </div>
                </div>

                <div class="test-case">
                    <h3>
                        <span class="test-number">2</span>
                        Get Consultant Dashboard
                    </h3>
                    <div class="test-case-description">
                        Shows "My Issues" (INTERNAL-SUPPORT) vs "Client Issues"
                    </div>
                    
                    <div class="method-url">
                        <span class="method GET">GET</span>
                        <div class="url-box" onclick="copyText(this)">{{BASE_URL}}/tickets/consultant-overview</div>
                        <button class="copy-button" onclick="copyText(this.previousElementSibling)">üìã Copy URL</button>
                    </div>

                    <div class="headers-section">
                        <h4>üì® Headers</h4>
                        <div class="header-item">
                            Authorization: Bearer {{TOKEN}}
                            <button class="copy-button" onclick="copyText(this.previousElementSibling)">üìã</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="toast" class="toast">‚úÖ Copied to clipboard!</div>

    <script>
        function showSection(sectionId) {
            // Hide all sections
            const sections = document.querySelectorAll('.section');
            sections.forEach(section => section.classList.remove('active'));

            // Show selected section
            document.getElementById(sectionId).classList.add('active');

            // Update nav buttons
            const buttons = document.querySelectorAll('.nav-button');
            buttons.forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');

            // Scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function copyText(element) {
            const text = element.textContent.trim();
            navigator.clipboard.writeText(text).then(() => {
                showToast();
            }).catch(err => {
                console.error('Failed to copy:', err);
            });
        }

        function copyCode(button) {
            const codeBlock = button.parentElement.nextElementSibling;
            const code = codeBlock.querySelector('pre').textContent.trim();
            navigator.clipboard.writeText(code).then(() => {
                showToast();
            }).catch(err => {
                console.error('Failed to copy:', err);
            });
        }

        function showToast() {
            const toast = document.getElementById('toast');
            toast.classList.add('show');
            setTimeout(() => {
                toast.classList.remove('show');
            }, 2000);
        }

        // Make URL boxes clickable
        document.addEventListener('DOMContentLoaded', () => {
            const urlBoxes = document.querySelectorAll('.url-box');
            urlBoxes.forEach(box => {
                box.title = 'Click to copy';
                box.style.cursor = 'pointer';
            });
        });
    </script>
</body>
</html>